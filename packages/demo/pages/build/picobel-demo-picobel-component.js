var P=Object.defineProperty,H=(e,t)=>{for(var r in t)P(e,r,{get:t[r],enumerable:!0})},k=(e="default")=>{switch(e){case"itunes":return["playPause",[["title","artist"],["timer","progress","duration"]]];case"default":default:return["playPause",["mute","volume"],["title","artist"],["timer","progress","duration"]]}},q=(e={})=>{let t={context:document,theme:"default",preload:!1},{components:r,...a}=e,l=k(e.theme),n={...t,components:l,...a};return r&&Array.isArray(r)&&(n.components=r),n},$=e=>{let t=Math.floor(e/3600),r=Math.floor(e%3600/60).toFixed(0).toString(),a=Math.floor(e%3600%60).toFixed(0).toString().padStart(2,"0"),l=`${r}:${a}`;return t>0&&(l=`${t}:${r.padStart(2,"0")}:${a}`),l},B=e=>e.replace(/^.*[\\/]/,"").split(".")[1],w=e=>e.replace(/^.*[\\/]/,"").split(".")[0],N=e=>[...e.getElementsByTagName("audio")].map((t,r)=>Object.assign(t,{key:r})),A=(e,t,r)=>[...`picobel loading picobel--index-${e} ${t}`.trim().split(" "),r],D=e=>e.map((t,r)=>(t.key=r,t.mute=!1,t.tmpVolume=1,t)),R=e=>{let t=e.currentSrc,r=B(t),a=w(t),l=e.title&&e.title!==""?e.title:`${a}.${r}`,n=e.dataset?.artist?e.dataset.artist:!1;return{url:t,fileType:r,fileName:a,title:l,artist:n}},_={};H(_,{artist:()=>I,duration:()=>W,mute:()=>J,playPause:()=>F,progress:()=>O,timer:()=>j,title:()=>V,volume:()=>U});var L=({namespace:e="picobel",min:t=0,max:r=100,value:a=0,step:l=!1,index:n=0,label:o="slider"})=>{let i=s("div",e),d=s("div",`${e}-slider__wrapper`),p=s("div",`${e}-slider__replacement`),E=s("div",`${e}-slider__background`);p.appendChild(E);let M=s("div",`${e}-slider__indicator`);p.appendChild(M);let C=s("div",`${e}-slider__playhead`);p.appendChild(C),d.appendChild(p);let v=`${e}-slider__range--${n}`,u=s("input",`${e}-slider__range`);u.setAttribute("id",v),u.setAttribute("type","range"),u.setAttribute("min",t.toString()),u.setAttribute("max",r.toString()),u.setAttribute("value",a.toString()),l&&u.setAttribute("step",l.toString()),d.appendChild(u);let m=s("label",`${e}-label`);return typeof o=="string"?m.innerHTML=o:m.appendChild(o),m.setAttribute("for",v),i.appendChild(m),i.appendChild(d),i},F=e=>{let t=s("button",`${e}__play-pause`);t.setAttribute("type","button");let r=s("span",`${e}__play-pause__text`);return r.innerHTML="Play",t.appendChild(r),t},V=(e,t)=>{let r=s("span",`${e}__title`);return r.innerHTML="File "+(t+1),r},I=e=>s("span",`${e}__artist`),j=e=>{let t=s("span",`${e}__timer`);return t.innerHTML="0:00",t},W=e=>{let t=s("span",`${e}__duration`);return t.innerHTML="-:--",t},O=(e,t)=>{let r=s("span",`${e}__progress-label-inner`);return r.innerHTML="Progress",L({namespace:`${e}__progress`,min:0,max:100,value:0,index:t,label:r})},J=e=>{let t=s("button",`${e}__mute`);return t.setAttribute("type","button"),t.innerHTML="Mute",t},U=(e,t)=>{let r=s("span",`${e}__volume-label-inner`),a=s("span",`${e}__volume-label-key`);a.innerHTML="Volume ",r.appendChild(a);let l=s("span",`${e}__volume-label-value`);return l.innerHTML="10",r.appendChild(l),L({namespace:`${e}__volume`,min:0,max:1,value:1,step:.1,index:t,label:r})},s=(e="div",t="")=>{let r=document.createElement(e);return r.className=t,r},b=({key:e,container:t,components:r,namespace:a})=>(r.forEach(l=>{if(typeof l=="string"&&_[l]){let n=_[l](a,e);t.appendChild(n);return}if(Array.isArray(l)&&l.length){let n=l.flat().join("-"),o=s("div",`${a}__wrapper--${n}`),i=b({key:e,container:o,components:l,namespace:a});t.appendChild(i)}}),t),z=e=>{let t=$(e.duration);return e.elements.durationDisplay&&(e.elements.durationDisplay.innerHTML=t),e},G=(e,t)=>(e.artist&&t.artistDisplay&&(t.artistDisplay.innerHTML=e.artist),t.titleDisplay&&(t.titleDisplay.innerHTML=e.title),t),K=(e,t,r)=>e.map(a=>{let l=s("div"),n=A(a.key,a.className,r);l.classList.add(...n),l.setAttribute("data-picobel-index",a.key.toString());let o=s("div",`${r}__loader`);return l.appendChild(o),b({key:a.key,container:l,components:t,namespace:r})}),Q=(e,t,r)=>e.map(a=>{let l=t.querySelector(`[data-picobel-index='${a.key}']`);return a.elements={wrapper:l,playPauseButton:l.querySelector(`.${r}__play-pause`),playPauseButtonText:l.querySelector(`.${r}__play-pause__text`),muteButton:l.querySelector(`.${r}__mute`),playTimer:l.querySelector(`.${r}__timer`),durationDisplay:l.querySelector(`.${r}__duration`),titleDisplay:l.querySelector(`.${r}__title`),artistDisplay:l.querySelector(`.${r}__artist`),progressWrapper:l.querySelector(`.${r}__progress-slider__replacement`),progressRange:l.querySelector(`.${r}__progress-slider__range`),progressPlayhead:l.querySelector(`.${r}__progress-slider__playhead`),progressBackground:l.querySelector(`.${r}__progress-slider__background`),progressIndicator:l.querySelector(`.${r}__progress-slider__indicator`),volumeWrapper:l.querySelector(`.${r}__volume-slider__replacement`),volumeControl:l.querySelector(`.${r}__volume-slider__range`),volumeDisplay:l.querySelector(`.${r}__volume-label-value`),volumeIndicator:l.querySelector(`.${r}__volume-slider__indicator`),volumePlayhead:l.querySelector(`.${r}__volume-slider__playhead`)},a}),X=e=>e.forEach(t=>{f(t)}),Y=(e,t)=>{e.paused||e.currentTime===0?(X(t),Z(e)):f(e)},Z=e=>{e.play();let t=e.elements.playPauseButton,r=e.elements.playPauseButtonText;t.classList.remove("paused"),r.innerHTML="Pause",t.classList.add("playing")},f=e=>{e.pause();let t=e.elements.playPauseButton,r=e.elements.playPauseButtonText;t.classList.remove("playing"),r.innerHTML="Play",t.classList.add("paused")},ee=e=>{e.pause();let t=e.elements.playPauseButton,r=e.elements.playPauseButtonText;t.classList.remove("playing"),r.innerHTML="Play"},te=e=>T(e.srcElement),T=e=>{let t=e.currentTime,r=e.duration;if(e.elements.playTimer){let l=$(t);e.elements.playTimer.innerHTML=l}t>=r&&ee(e);let a=(t/r*100).toFixed(2);e.elements.progressRange&&(e.elements.progressRange.value=a,e.elements.progressIndicator.style.width=a+"%",e.elements.progressPlayhead.style.left=a+"%")},re=e=>{z(e),y(e)},y=e=>{e.elements.wrapper.classList.remove("loading");let t=R(e);G(t,e.elements)},le=e=>{e.elements.wrapper.classList.add("error"),e.elements.wrapper.classList.remove("loading"),e.elements.wrapper.innerHTML='<div class="error" style="display:flex;height: 100%;align-items:  center;justify-content: center;"><span class="error__icon"></span><span class="error__message">Error loading audio file</span></div>'},ae=(e,t)=>{let r=(t.duration*(e.srcElement.value/100)).toFixed(2);t.currentTime=r,T(t)},g=(e,t)=>e.elements.progressWrapper.classList.toggle("focus",t),se=(e,t)=>{let r=e.srcElement.value;t.tmpVolume=t.volume,t.mute=!1,S(t),c(t,r)},h=(e,t)=>e.elements.volumeWrapper.classList.toggle("focus",t),c=(e,t)=>{let r=t*10,a=(t*100).toFixed(2);e.volume=t,e.elements.volumeDisplay&&(e.elements.volumeDisplay.innerHTML=r),e.elements.volumeControl&&(e.elements.volumeControl.value=t),e.elements.volumeIndicator&&(e.elements.volumeIndicator.style.width=a+"%"),e.elements.volumePlayhead&&(e.elements.volumePlayhead.style.left=a+"%")},ne=e=>{e.mute=!e.mute,S(e)},S=e=>{let t=e.elements.muteButton;e.mute?(e.tmpVolume=e.volume,c(e,0),t.classList.add("muted"),t.classList.remove("unmuted"),t.innerHTML="Unmute"):(typeof e.tmpVolume<"u"&&e.tmpVolume>0?c(e,e.tmpVolume):c(e,1),t.classList.remove("muted"),t.classList.add("unmuted"),t.innerHTML="Mute")},oe=(e,t)=>{let r=e.duration,a=(t/r*100).toFixed(2);e.elements.progressBackground&&(e.elements.progressBackground.style.width=a+"%")},x=e=>{if(e.buffered.length>0){let t=e.buffered.end(e.buffered.length-1),r=e.duration;oe(e,t),t>=r&&e.removeEventListener("progress",()=>x(e))}},ie=e=>e.map(t=>(t.addEventListener("progress",()=>x(t),!1),t.addEventListener("timeupdate",te,!1),t.addEventListener("canplaythrough",()=>re(t),!1),t.addEventListener("loadedmetadata",()=>y(t),!1),t.addEventListener("error",()=>le(t),!1),t.elements?.playPauseButton&&t.elements?.playPauseButton.addEventListener("click",()=>Y(t,e),!1),t.elements?.progressRange&&t.elements?.progressRange.addEventListener("input",r=>ae(r,t),!1),t.elements?.progressRange&&t.elements?.progressRange.addEventListener("focus",()=>g(t,!0),!1),t.elements?.progressRange&&t.elements?.progressRange.addEventListener("blur",()=>g(t,!1),!1),t.elements?.volumeControl&&t.elements?.volumeControl.addEventListener("input",r=>se(r,t),!1),t.elements?.volumeControl&&t.elements?.volumeControl.addEventListener("focus",()=>h(t,!0),!1),t.elements?.volumeControl&&t.elements?.volumeControl.addEventListener("blur",()=>h(t,!1),!1),t.elements?.muteButton&&t.elements?.muteButton.addEventListener("click",()=>ne(t),!1),t)),ue=(e={})=>{let t=q(e),r={audioNodes:[],theme:t.theme,components:t.components},a=(n,o)=>{n.map((i,d)=>{i.parentNode.replaceChild(o[d],i)})};r.audioNodes=N(t.context),r.audioNodes=D(r.audioNodes);let l=K(r.audioNodes,r.components,r.theme);return a(r.audioNodes,l),r.audioNodes=Q(r.audioNodes,t.context,r.theme),r.audioNodes=ie(r.audioNodes),r.audioNodes.forEach(n=>{n.readyState>=1&&y(n)}),{state:r}},de=class extends HTMLElement{constructor(){super()}connectedCallback(){let e=this.classList[0]||"default",t={theme:this.getAttribute("data-theme")||e,context:this},r=this.getAttribute("data-components");r&&(t.components=JSON.parse(r)),ue(t)}};typeof window<"u"&&"customElements"in window&&window.customElements.define("picobel-player",de);

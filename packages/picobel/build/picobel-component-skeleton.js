var Q=Object.defineProperty;var X=(e,t)=>{for(var r in t)Q(e,r,{get:t[r],enumerable:!0})};var L=`.skeleton.picobel{--black: #555;--white: #ffffff;--grey: #ccc;--grey--light: #eee;--chrome-focus-blue: #015ecc;--progress-height: 32px;--progress-inner-height: calc(var(--progress-height) - 2px);--skeleton-focus: var(--chrome-focus-blue);--skeleton-background: var(--white);--skeleton-text: var(--black);--skeleton-progress: var(--grey);--skeleton-progress-bg: var(--white);--skeleton-buffered: var(--grey--light)}.skeleton.picobel *,.skeleton.picobel *:before,.skeleton.picobel *:after{box-sizing:inherit}.skeleton.picobel *:focus{outline:2px solid var(--skeleton-focus);outline-offset:1px;border-radius:2px}.skeleton.picobel{font-size:inherit;position:relative;box-sizing:border-box;z-index:1;margin:10px 0;height:64px;border:1px solid var(--skeleton-text)}@keyframes skeleton_background_slide{0%{background-position:0 0}to{background-position:20px 0}}.skeleton__loader{position:absolute;display:none;z-index:5;bottom:-1px;left:183px;right:0;height:var(--progress-height);border-top:1px solid var(--skeleton-text);border-bottom:1px solid var(--skeleton-text);background:linear-gradient(to right,var(--skeleton-background) 50%,var(--skeleton-text) 50%);background-size:20px 20px;background-repeat:repeat;background-position:0 0;animation:skeleton_background_slide linear infinite .4s}.skeleton.loading .skeleton__loader{display:block}.skeleton__play-pause{font-size:10px;border:1px solid var(--skeleton-text);appearance:none;width:64px;height:64px;background:var(--skeleton-background);position:absolute;top:-1px;left:-1px;cursor:pointer}.skeleton__play-pause__text{display:none}.skeleton__play-pause:focus{z-index:3}.skeleton__play-pause:before{content:"";display:block;position:absolute;top:50%;left:50%;transform:translate(-40%,-50%);border-top:10px solid transparent;border-left:12px solid var(--skeleton-text);border-bottom:10px solid transparent}.skeleton__play-pause.playing:before{height:18px;width:16px;transform:translate(-50%,-50%);border-top:0;border-left:6px solid var(--skeleton-text);border-right:6px solid var(--skeleton-text);border-bottom:0}.skeleton__wrapper--title-artist{padding:0 10px 0 74px;height:64px;background:var(--skeleton-background);color:var(--skeleton-text);line-height:1.6}.skeleton__title{display:inline-block;line-height:1;font-weight:700;font-family:monospace}.skeleton__artist{font-family:monospace;display:inline-block;margin-left:5px;line-height:1}.skeleton__artist:not(:empty):before{content:" \\2013  "}.skeleton__wrapper--timer-progress-duration{position:absolute;bottom:-1px;left:182px;right:0;height:32px;border-left:1px solid var(--skeleton-text)}.skeleton__timer,.skeleton__duration{position:absolute;bottom:0;z-index:4;text-align:left;background:transparent;color:var(--skeleton-text);line-height:1;pointer-events:none;font-size:14px;height:32px;padding:10px 5px 9px 10px;font-family:monospace}.skeleton__timer{left:0}.skeleton__duration{right:0;text-align:right}.skeleton.loading .skeleton__timer,.skeleton.loading .skeleton__duration{display:none}.skeleton__progress-slider__wrapper{height:var(--progress-height);font-size:10px;line-height:1;position:absolute;bottom:0;left:0;width:100%}.skeleton__progress-slider__replacement{position:relative;background:var(--skeleton-background);border-top:1px solid var(--skeleton-text);border-bottom:1px solid var(--skeleton-text);height:var(--progress-height);overflow:hidden}.skeleton__progress-slider__replacement.focus{outline:2px solid var(--skeleton-focus);outline-offset:1px;border-radius:2px;z-index:3}.skeleton__progress-slider__background{transition:width .2s;height:var(--progress-inner-height);position:absolute;top:0;left:0;width:100%;background:var(--skeleton-progress-bg)}.skeleton__progress-slider__buffered{height:var(--progress-inner-height);position:absolute;top:0;left:0;background:var(--skeleton-buffered)}.skeleton__progress-slider__indicator{height:var(--progress-inner-height);position:absolute;top:0;left:0;background:var(--skeleton-progress);width:0%}.skeleton__progress-slider__playhead{width:8px;height:var(--progress-inner-height);position:absolute;top:0;left:0%;margin-left:-4px;background:var(--skeleton-text)}.skeleton.loading .skeleton__progress-slider__indicator,.skeleton.loading .skeleton__progress-slider__playhead{display:none}.skeleton__progress-slider__range{width:100%;height:var(--progress-height);padding:0;margin:0;z-index:4;position:absolute;top:0;left:0;opacity:0}.skeleton__progress-slider__range::-webkit-slider-runnable-track{width:100%;height:var(--progress-height);cursor:pointer}.skeleton__progress-slider__range::-moz-range-track{width:100%;height:var(--progress-height);cursor:pointer}.skeleton__progress-slider__range::-ms-track{width:100%;height:var(--progress-height);cursor:pointer}.skeleton__wrapper--mute-volume{position:absolute;bottom:-1px;left:62px;width:120px;height:32px;z-index:2;border-top:1px solid var(--skeleton-text);border-bottom:1px solid var(--skeleton-text);background:var(--skeleton-background);display:flex;align-items:center}.skeleton__mute{display:block;z-index:2;float:left;width:32px;height:32px;font-size:10px;color:transparent;border:0;appearance:none;background:var(--skeleton-background);border:1px solid var(--skeleton-text);position:relative;cursor:pointer;overflow:hidden;flex-shrink:0}.skeleton__mute:before{display:block;width:6px;height:6px;position:absolute;content:"";top:50%;right:50%;margin-right:-1px;transform:translateY(-50%);background:var(--skeleton-text)}.skeleton__mute:after{display:block;width:5px;height:5px;position:absolute;content:"";top:50%;transform:translateY(-50%);right:50%;margin-right:-4px;border-top:8px solid transparent;border-right:8px solid var(--skeleton-text);border-bottom:8px solid transparent}.skeleton__mute.muted:before{background:var(--skeleton-progress)}.skeleton__mute.muted:after{border-right-color:var(--skeleton-progress)}.skeleton__volume{--volume-padding: 6px;--volume-height: 20px;--volume-width: 76px;width:var(--volume-width) + var(--volume-padding) * 2;height:var(--volume-height) + var(--volume-padding) * 2;padding:var(--volume-padding)}.skeleton__volume-label{display:none}.skeleton__volume-slider__wrapper{width:var(--volume-width);height:var(--volume-height);position:relative}.skeleton__volume-slider__replacement{display:block;height:var(--volume-height);width:var(--volume-width);position:relative;left:0;z-index:3;background:var(--skeleton-progress);flex-grow:1;float:left;transform:rotate(180deg)}.skeleton__volume-slider__replacement:after{content:"";display:block;border-right:var(--volume-width) solid var(--skeleton-background);border-top:var(--volume-height) solid transparent;position:absolute;top:0;left:0;pointer-events:none}.skeleton__volume-slider__replacement.focus{outline:2px solid var(--skeleton-focus);outline-offset:1px;border-radius:2px}.skeleton__volume-slider__indicator{height:100%;position:absolute;top:0;right:0;background:var(--skeleton-text);width:var(--volume-width)}.skeleton__volume-slider__playhead{display:none}.skeleton__volume-slider__range{width:100%;height:var(--volume-height);padding:0;margin:0;position:absolute;z-index:4;top:0;left:0;opacity:0}.skeleton__volume-slider__range::-webkit-slider-runnable-track{width:100%;height:var(--volume-height);cursor:pointer}.skeleton__volume-slider__range::-moz-range-track{width:100%;height:var(--volume-height);cursor:pointer}.skeleton__volume-slider__range::-ms-track{width:100%;height:var(--volume-height);cursor:pointer}
`;var ee=(e="default")=>{switch(e){case"itunes":return["playPause",[["title","artist"],["timer","progress","duration"]]];case"default":default:return["playPause",["mute","volume"],["title","artist"],["timer","progress","duration"]]}},E=(e={})=>{let t={context:document,theme:"default",preload:!1},{components:r,...s}=e,o=ee(e.theme),i={...t,components:o,...s};return r&&Array.isArray(r)&&(i.components=r),i};var g=e=>{let t=Math.floor(e/3600),r=Math.floor(e%3600/60).toFixed(0).toString(),s=Math.floor(e%3600%60).toFixed(0).toString().padStart(2,"0"),o=`${r}:${s}`;return t>0&&(o=`${t}:${r.padStart(2,"0")}:${s}`),o},A=e=>e.replace(/^.*[\\/]/,"").split(".")[1],T=e=>e.replace(/^.*[\\/]/,"").split(".")[0];var $=e=>[...e.getElementsByTagName("audio")].map((s,o)=>Object.assign(s,{key:o})),P=(e,t,r)=>[...`picobel loading picobel--index-${e} ${t}`.trim().split(" "),r],C=e=>e.map((t,r)=>(t.key=r,t.mute=!1,t.tmpVolume=1,t)),M=e=>{let t=e.currentSrc,r=A(t),s=T(t),o=e.title&&e.title!==""?e.title:`${s}.${r}`,i=e.dataset?.artist?e.dataset.artist:!1;return{url:t,fileType:r,fileName:s,title:o,artist:i}};var _={};X(_,{artist:()=>oe,duration:()=>ne,mute:()=>le,playPause:()=>te,progress:()=>ie,timer:()=>se,title:()=>re,volume:()=>ae});var f=({namespace:e="picobel",min:t=0,max:r=100,value:s=0,step:o=!1,index:i=0,label:a="slider"})=>{let l=n("div",e),u=n("div",`${e}-slider__wrapper`),m=n("div",`${e}-slider__replacement`),K=n("div",`${e}-slider__background`);m.appendChild(K);let Y=n("div",`${e}-slider__indicator`);m.appendChild(Y);let J=n("div",`${e}-slider__playhead`);m.appendChild(J),u.appendChild(m);let w=`${e}-slider__range--${i}`,p=n("input",`${e}-slider__range`);p.setAttribute("id",w),p.setAttribute("type","range"),p.setAttribute("min",t.toString()),p.setAttribute("max",r.toString()),p.setAttribute("value",s.toString()),o&&p.setAttribute("step",o.toString()),u.appendChild(p);let c=n("label",`${e}-label`);return typeof a=="string"?c.innerHTML=a:c.appendChild(a),c.setAttribute("for",w),l.appendChild(c),l.appendChild(u),l};var te=e=>{let t=n("button",`${e}__play-pause`);t.setAttribute("type","button");let r=n("span",`${e}__play-pause__text`);return r.innerHTML="Play",t.appendChild(r),t},re=(e,t)=>{let r=n("span",`${e}__title`);return r.innerHTML="File "+(t+1),r},oe=e=>n("span",`${e}__artist`),se=e=>{let t=n("span",`${e}__timer`);return t.innerHTML="0:00",t},ne=e=>{let t=n("span",`${e}__duration`);return t.innerHTML="-:--",t},ie=(e,t)=>{let r=n("span",`${e}__progress-label-inner`);return r.innerHTML="Progress",f({namespace:`${e}__progress`,min:0,max:100,value:0,index:t,label:r})},le=e=>{let t=n("button",`${e}__mute`);return t.setAttribute("type","button"),t.innerHTML="Mute",t},ae=(e,t)=>{let r=n("span",`${e}__volume-label-inner`),s=n("span",`${e}__volume-label-key`);s.innerHTML="Volume ",r.appendChild(s);let o=n("span",`${e}__volume-label-value`);return o.innerHTML="10",r.appendChild(o),f({namespace:`${e}__volume`,min:0,max:1,value:1,step:.1,index:t,label:r})};var n=(e="div",t="")=>{let r=document.createElement(e);return r.className=t,r},b=({key:e,container:t,components:r,namespace:s})=>(r.forEach(o=>{if(typeof o=="string"&&_[o]){let i=_[o](s,e);t.appendChild(i);return}if(Array.isArray(o)&&o.length){let i=o.flat().join("-"),a=n("div",`${s}__wrapper--${i}`),l=b({key:e,container:a,components:o,namespace:s});t.appendChild(l)}}),t);var S=e=>{let t=g(e.duration);return e.elements.durationDisplay&&(e.elements.durationDisplay.innerHTML=t),e},H=(e,t)=>(e.artist&&t.artistDisplay&&(t.artistDisplay.innerHTML=e.artist),t.titleDisplay&&(t.titleDisplay.innerHTML=e.title),t),N=(e,t,r)=>e.map(o=>{let i=n("div"),a=P(o.key,o.className,r);i.classList.add(...a),i.setAttribute("data-picobel-index",o.key.toString());let l=n("div",`${r}__loader`);return i.appendChild(l),b({key:o.key,container:i,components:t,namespace:r})}),B=(e,t,r)=>e.map(s=>{let o=t.querySelector(`[data-picobel-index='${s.key}']`);return s.elements={wrapper:o,playPauseButton:o.querySelector(`.${r}__play-pause`),playPauseButtonText:o.querySelector(`.${r}__play-pause__text`),muteButton:o.querySelector(`.${r}__mute`),playTimer:o.querySelector(`.${r}__timer`),durationDisplay:o.querySelector(`.${r}__duration`),titleDisplay:o.querySelector(`.${r}__title`),artistDisplay:o.querySelector(`.${r}__artist`),progressWrapper:o.querySelector(`.${r}__progress-slider__replacement`),progressRange:o.querySelector(`.${r}__progress-slider__range`),progressPlayhead:o.querySelector(`.${r}__progress-slider__playhead`),progressBackground:o.querySelector(`.${r}__progress-slider__background`),progressIndicator:o.querySelector(`.${r}__progress-slider__indicator`),volumeWrapper:o.querySelector(`.${r}__volume-slider__replacement`),volumeControl:o.querySelector(`.${r}__volume-slider__range`),volumeDisplay:o.querySelector(`.${r}__volume-label-value`),volumeIndicator:o.querySelector(`.${r}__volume-slider__indicator`),volumePlayhead:o.querySelector(`.${r}__volume-slider__playhead`)},s});var pe=e=>e.forEach(t=>{z(t)}),F=(e,t)=>{e.paused||e.currentTime===0?(pe(t),ue(e)):z(e)},ue=e=>{e.play();let t=e.elements.playPauseButton,r=e.elements.playPauseButtonText;t.classList.remove("paused"),r.innerHTML="Pause",t.classList.add("playing")},z=e=>{e.pause();let t=e.elements.playPauseButton,r=e.elements.playPauseButtonText;t.classList.remove("playing"),r.innerHTML="Play",t.classList.add("paused")},de=e=>{e.pause();let t=e.elements.playPauseButton,r=e.elements.playPauseButtonText;t.classList.remove("playing"),r.innerHTML="Play"},q=e=>D(e.srcElement),D=e=>{let t=e.currentTime,r=e.duration;if(e.elements.playTimer){let o=g(t);e.elements.playTimer.innerHTML=o}t>=r&&de(e);let s=(t/r*100).toFixed(2);e.elements.progressRange&&(e.elements.progressRange.value=s,e.elements.progressIndicator.style.width=s+"%",e.elements.progressPlayhead.style.left=s+"%")},O=e=>{S(e),d(e)},d=e=>{e.elements.wrapper.classList.remove("loading");let t=M(e);H(t,e.elements)},R=e=>{e.elements.wrapper.classList.add("error"),e.elements.wrapper.classList.remove("loading"),e.elements.wrapper.innerHTML='<div class="error" style="display:flex;height: 100%;align-items:  center;justify-content: center;"><span class="error__icon"></span><span class="error__message">Error loading audio file</span></div>'},I=(e,t)=>{let o=(t.duration*(e.srcElement.value/100)).toFixed(2);t.currentTime=o,D(t)},x=(e,t)=>e.elements.progressWrapper.classList.toggle("focus",t),V=(e,t)=>{let r=e.srcElement.value;t.tmpVolume=t.volume,t.mute=!1,U(t),h(t,r)},v=(e,t)=>e.elements.volumeWrapper.classList.toggle("focus",t),h=(e,t)=>{let r=t*10,s=(t*100).toFixed(2);e.volume=t,e.elements.volumeDisplay&&(e.elements.volumeDisplay.innerHTML=r),e.elements.volumeControl&&(e.elements.volumeControl.value=t),e.elements.volumeIndicator&&(e.elements.volumeIndicator.style.width=s+"%"),e.elements.volumePlayhead&&(e.elements.volumePlayhead.style.left=s+"%")},G=e=>{e.mute=!e.mute,U(e)},U=e=>{let t=e.elements.muteButton;e.mute?(e.tmpVolume=e.volume,h(e,0),t.classList.add("muted"),t.classList.remove("unmuted"),t.innerHTML="Unmute"):(typeof e.tmpVolume<"u"&&e.tmpVolume>0?h(e,e.tmpVolume):h(e,1),t.classList.remove("muted"),t.classList.add("unmuted"),t.innerHTML="Mute")},me=(e,t)=>{let r=e.duration,s=(t/r*100).toFixed(2);e.elements.progressBackground&&(e.elements.progressBackground.style.width=s+"%")},k=e=>{if(e.buffered.length>0){let t=e.buffered.end(e.buffered.length-1),r=e.duration;me(e,t),t>=r&&e.removeEventListener("progress",()=>k(e))}};var W=e=>e.map(t=>(t.addEventListener("progress",()=>k(t),!1),t.addEventListener("timeupdate",q,!1),t.addEventListener("canplaythrough",()=>O(t),!1),t.addEventListener("loadedmetadata",()=>d(t),!1),t.addEventListener("error",()=>R(t),!1),t.elements?.playPauseButton&&t.elements?.playPauseButton.addEventListener("click",()=>F(t,e),!1),t.elements?.progressRange&&t.elements?.progressRange.addEventListener("input",r=>I(r,t),!1),t.elements?.progressRange&&t.elements?.progressRange.addEventListener("focus",()=>x(t,!0),!1),t.elements?.progressRange&&t.elements?.progressRange.addEventListener("blur",()=>x(t,!1),!1),t.elements?.volumeControl&&t.elements?.volumeControl.addEventListener("input",r=>V(r,t),!1),t.elements?.volumeControl&&t.elements?.volumeControl.addEventListener("focus",()=>v(t,!0),!1),t.elements?.volumeControl&&t.elements?.volumeControl.addEventListener("blur",()=>v(t,!1),!1),t.elements?.muteButton&&t.elements?.muteButton.addEventListener("click",()=>G(t),!1),t));var j=(e={})=>{let t=E(e),r={audioNodes:[],theme:t.theme,components:t.components},s=(i,a)=>{i.map((l,u)=>{l.parentNode.replaceChild(a[u],l)})};r.audioNodes=$(t.context),r.audioNodes=C(r.audioNodes);let o=N(r.audioNodes,r.components,r.theme);return s(r.audioNodes,o),r.audioNodes=B(r.audioNodes,t.context,r.theme),r.audioNodes=W(r.audioNodes),r.audioNodes.forEach(i=>{i.readyState>=1&&d(i)}),{state:r}};var y=class extends HTMLElement{constructor(){super()}mountStyles(t="skeleton"){let r=`picobel-styles-${t}`;if(!document.getElementById(r)){let s=document.createElement("style");s.id=r,s.textContent=L,document.head.appendChild(s)}}connectedCallback(){let t=this.getAttribute("data-theme")||"skeleton",r={theme:t,context:this},s=this.getAttribute("data-components");s&&(r.components=JSON.parse(s)),j(r),this.mountStyles(t)}};typeof window<"u"&&"customElements"in window&&window.customElements.define("picobel-player-skeleton",y);

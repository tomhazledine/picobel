(()=>{var N=Object.defineProperty;var M=(e,s)=>{for(var r in s)N(e,r,{get:s[r],enumerable:!0})};var L={parseTime:e=>{let s=Math.floor(e/3600),r=Math.floor(e%3600/60).toFixed(0).toString(),u=Math.floor(e%3600%60).toFixed(0).toString();u=u>=10?u:`0${u}`;let o=`${r}:${u}`;return s>0&&(r=r>=10?r:`0${r}`,o=`${s}:${r}:${u}`),o},getFileType:e=>e.substr((~-e.lastIndexOf(".")>>>0)+2),getFileName:e=>e.replace(/^.*[\\\/]/,"").split(".")[0],findParentIndex:e=>typeof e.dataset.picobelIndex<"u"?e.dataset.picobelIndex:typeof e.parentNode<"u"&&typeof e.parentNode.dataset<"u"?L.findParentIndex(e.parentNode):!1},m=L;var C=(e="default")=>{switch(e){case"itunes":return["playPause",[["title","artist"],["timer","progress","duration"]]];case"default":default:return["playPause",["mute","volume"],["title","artist"],["timer","progress","duration"]]}},P=(e={})=>{let s={context:document,theme:"default",preload:!1},{components:r,...u}=e,o=C(e.theme),i={...s,components:o,...u};return r&&Array.isArray(r)&&(i.components=r),i};var E={findAudio:e=>{let s=e.getElementsByTagName("audio");return[].slice.call(s)},prepareClasses:(e,s,r)=>[...`picobel loading picobel--index-${e} ${s}`.trim().split(" "),r],getRawData:e=>e.map((s,r)=>(s.key=r,s.mute=!1,s.tmpVolume=1,s)),getMeta:e=>{let s={};return s.url=e.currentSrc,s.fileType=m.getFileType(s.url),s.fileName=m.getFileName(s.url),s.title=e.title&&e.title!==""?e.title:`${s.fileName}.${s.fileType}`,e.dataset?s.artist=e.dataset.artist?e.dataset.artist:!1:s.artist=!1,s}},y=E;var v={};M(v,{artist:()=>k,duration:()=>w,mute:()=>D,playPause:()=>A,progress:()=>H,timer:()=>B,title:()=>S,volume:()=>q});var p=(e="div",s="")=>{let r=document.createElement(e);return r.className=s,r},x=({key:e,container:s,components:r,namespace:u})=>(r.forEach(o=>{if(typeof o=="string"&&v[o]){let i=v[o](u,e);s.appendChild(i);return}if(Array.isArray(o)&&o.length){let i=o.flat().join("-"),c=p("div",`${u}__wrapper--${i}`),t=x({key:e,container:c,components:o,namespace:u});s.appendChild(t)}}),s);var b=({namespace:e="picobel",min:s=0,max:r=100,value:u=0,step:o=!1,index:i=0,label:c="slider"})=>{let t=p("div",e),l=p("div",`${e}-slider__wrapper`),a=p("div",`${e}-slider__replacement`),n=p("div",`${e}-slider__background`);a.appendChild(n);let d=p("div",`${e}-slider__indicator`);a.appendChild(d);let h=p("div",`${e}-slider__playhead`);a.appendChild(h),l.appendChild(a);let $=`${e}-slider__range--${i}`,f=p("input",`${e}-slider__range`);f.setAttribute("id",$),f.setAttribute("type","range"),f.setAttribute("min",s),f.setAttribute("max",r),f.setAttribute("value",u),o&&f.setAttribute("step",o),l.appendChild(f);let g=p("label",`${e}-label`);return typeof c=="string"?g.innerHTML=c:g.appendChild(c),g.setAttribute("for",$),t.appendChild(g),t.appendChild(l),t};var A=e=>{let s=p("button",`${e}__play-pause`);s.setAttribute("type","button");let r=p("span",`${e}__play-pause__text`);return r.innerHTML="Play",s.appendChild(r),s},S=(e,s)=>{let r=p("span",`${e}__title`);return r.innerHTML="File "+(s+1),r},k=e=>p("span",`${e}__artist`),B=e=>{let s=p("span",`${e}__timer`);return s.innerHTML="0:00",s},w=e=>{let s=p("span",`${e}__duration`);return s.innerHTML="-:--",s},H=(e,s)=>{let r=p("span",`${e}__progress-label-inner`);return r.innerHTML="Progress",b({namespace:`${e}__progress`,min:0,max:100,value:0,index:s,label:r})},D=e=>{let s=p("button",`${e}__mute`);return s.setAttribute("type","button"),s.innerHTML="Mute",s},q=(e,s)=>{let r=p("span",`${e}__volume-label-inner`),u=p("span",`${e}__volume-label-key`);u.innerHTML="Volume ",r.appendChild(u);let o=p("span",`${e}__volume-label-value`);return o.innerHTML="10",r.appendChild(o),b({namespace:`${e}__volume`,min:0,max:1,value:1,step:.1,index:s,label:r})};var F={setLengthDisplay:e=>{let s=m.parseTime(e.duration);return e.elements.durationDisplay&&(e.elements.durationDisplay.innerHTML=s),e},setMeta:(e,s)=>(e.artist&&s.artistDisplay&&(s.artistDisplay.innerHTML=e.artist),s.titleDisplay&&(s.titleDisplay.innerHTML=e.title),s),generateMarkup:(e=[],s,r)=>e.map(o=>{let i=p("div"),c=y.prepareClasses(o.key,o.className,r);i.classList.add(...c),i.setAttribute("data-picobel-index",o.key);let t=p("div",`${r}__loader`);return i.appendChild(t),x({key:o.key,container:i,components:s,namespace:r})}),elementHooks:(e,s,r)=>e.map(u=>{let o=s.querySelector(`[data-picobel-index='${u.key}']`);return u.elements={wrapper:o,playPauseButton:o.querySelector(`.${r}__play-pause`),playPauseButtonText:o.querySelector(`.${r}__play-pause__text`),muteButton:o.querySelector(`.${r}__mute`),playTimer:o.querySelector(`.${r}__timer`),durationDisplay:o.querySelector(`.${r}__duration`),titleDisplay:o.querySelector(`.${r}__title`),artistDisplay:o.querySelector(`.${r}__artist`),progressWrapper:o.querySelector(`.${r}__progress-slider__replacement`),progressBar:o.querySelector(`.${r}__progress-slider__range`),playhead:o.querySelector(`.${r}__progress-slider__playhead`),indicator:o.querySelector(`.${r}__progress-slider__indicator`),volumeWrapper:o.querySelector(`.${r}__volume-slider__replacement`),volumeControl:o.querySelector(`.${r}__volume-slider__range`),volumeDisplay:o.querySelector(`.${r}__volume-label-value`),volumeIndicator:o.querySelector(`.${r}__volume-slider__indicator`),volumePlayhead:o.querySelector(`.${r}__volume-slider__playhead`)},u})},_=F;var T=(e={})=>{let s=P(e),r={audioNodes:[],theme:s.theme,components:s.components},u=(t,l)=>{t.map((a,n)=>{a.parentNode.replaceChild(l[n],a)})},o=t=>t.map((l,a)=>(l.addEventListener("timeupdate",i.triggerUpdateProgress,!1),l.addEventListener("canplaythrough",i.canplaythrough,!1),l.addEventListener("error",()=>i.errors(a),!1),l.elements.playPauseButton&&l.elements.playPauseButton.addEventListener("click",i.triggerPlayPauseAudio,!1),l.elements.progressBar&&l.elements.progressBar.addEventListener("input",i.sliderScrub,!1),l.elements.progressBar&&l.elements.progressBar.addEventListener("focus",n=>i.sliderFocus(n,!0),!1),l.elements.progressBar&&l.elements.progressBar.addEventListener("blur",n=>i.sliderFocus(n,!1),!1),l.elements.volumeControl&&l.elements.volumeControl.addEventListener("input",i.volume,!1),l.elements.volumeControl&&l.elements.volumeControl.addEventListener("focus",n=>i.volumeFocus(n,!0),!1),l.elements.volumeControl&&l.elements.volumeControl.addEventListener("blur",n=>i.volumeFocus(n,!1),!1),l.elements.muteButton&&l.elements.muteButton.addEventListener("click",i.muteUnmuteAudio,!1),l)),i={pauseAll:()=>{r.audioNodes.forEach(t=>{i.pause(t)})},triggerPlayPauseAudio:t=>{let l=m.findParentIndex(t.srcElement),a=r.audioNodes.find(n=>n.key==l);i.playPauseAudio(a)},playPauseAudio:t=>{t.paused||t.currentTime===0?(i.pauseAll(),i.play(t)):i.pause(t)},play:t=>{t.play();let l=t.elements.playPauseButton,a=t.elements.playPauseButtonText;l.classList.remove("paused"),a.innerHTML="Pause",l.classList.add("playing")},pause:t=>{t.pause();let l=t.elements.playPauseButton,a=t.elements.playPauseButtonText;l.classList.remove("playing"),a.innerHTML="Play",l.classList.add("paused")},stop:t=>{t.pause();let l=t.elements.playPauseButton,a=t.elements.playPauseButtonText;l.classList.remove("playing"),a.innerHTML="Play"},triggerUpdateProgress:t=>i.updateProgress(t.srcElement),updateProgress:t=>{let l=t.currentTime,a=t.duration;if(t.elements.playTimer){let d=m.parseTime(l);t.elements.playTimer.innerHTML=d}l>=a&&i.stop(t);let n=(l/a*100).toFixed(2);t.elements.progressBar&&(t.elements.progressBar.value=n,t.elements.indicator.style.width=n+"%",t.elements.playhead.style.left=n+"%")},canplaythrough:function(){_.setLengthDisplay(this),this.elements.wrapper.classList.remove("loading");let t=y.getMeta(this);_.setMeta(t,this.elements)},errors:t=>{let{elements:l}=r.audioNodes[t];l.wrapper.classList.add("error"),l.wrapper.classList.remove("loading"),l.wrapper.innerHTML='<div class="error" style="display:flex;height: 100%;align-items:  center;justify-content: center;"><span class="error__icon"></span><span class="error__message">Error loading audio file</span></div>'},sliderScrub:t=>{let l=m.findParentIndex(t.srcElement),a=r.audioNodes.find(h=>h.key==l),d=a.duration*(t.srcElement.value/100);d=d.toFixed(2),a.currentTime=d,i.updateProgress(a)},sliderFocus:(t,l)=>{let a=m.findParentIndex(t.srcElement);r.audioNodes.find(d=>d.key==a).elements.progressWrapper.classList.toggle("focus",l)},volume:t=>{let l=m.findParentIndex(t.srcElement),a=r.audioNodes.find(d=>d.key==l),n=t.srcElement.value;a.tmpVolume=a.volume,a.mute=!1,i.mute(a),i.setVolume(a,n)},volumeFocus:(t,l)=>{let a=m.findParentIndex(t.srcElement);r.audioNodes.find(d=>d.key==a).elements.volumeWrapper.classList.toggle("focus",l)},setVolume:(t,l)=>{let a=l*10,n=l*100;t.volume=l,t.elements.volumeDisplay&&(t.elements.volumeDisplay.innerHTML=a),t.elements.volumeControl&&(t.elements.volumeControl.value=l),t.elements.volumeIndicator&&(t.elements.volumeIndicator.style.width=n+"%"),t.elements.volumePlayhead&&(t.elements.volumePlayhead.style.left=n+"%")},muteUnmuteAudio:t=>{let l=m.findParentIndex(t.srcElement),a=r.audioNodes.find(n=>n.key==l);a.mute=!a.mute,i.mute(a)},mute:t=>{let l=t.elements.muteButton;t.mute?(t.tmpVolume=t.volume,i.setVolume(t,0),l.classList.add("muted"),l.classList.remove("unmuted"),l.innerHTML="Unmute"):(typeof t.tmpVolume<"u"&&t.tmpVolume>0?i.setVolume(t,t.tmpVolume):i.setVolume(t,1),l.classList.remove("muted"),l.classList.add("unmuted"),l.innerHTML="Mute")}};r.audioNodes=y.findAudio(s.context),r.audioNodes=y.getRawData(r.audioNodes);let c=_.generateMarkup(r.audioNodes,r.components,r.theme);return u(r.audioNodes,c),r.audioNodes=_.elementHooks(r.audioNodes,s.context,r.theme),r.audioNodes=o(r.audioNodes),r.audioNodes.forEach(t=>{let{readyState:l}=t;l===4&&i.canplaythrough.call(t)}),{state:r,PicobelAudio:i}};window.picobel=T;})();

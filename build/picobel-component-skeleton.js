var N=Object.defineProperty;var E=(t,o)=>{for(var e in o)N(t,e,{get:o[e],enumerable:!0})};var $={parseTime:t=>{let o=Math.floor(t/3600),e=Math.floor(t%3600/60).toFixed(0).toString(),a=Math.floor(t%3600%60).toFixed(0).toString();a=a>=10?a:`0${a}`;let l=`${e}:${a}`;return o>0&&(e=e>=10?e:`0${e}`,l=`${o}:${e}:${a}`),l},getFileType:t=>t.substr((~-t.lastIndexOf(".")>>>0)+2),getFileName:t=>t.replace(/^.*[\\\/]/,"").split(".")[0],findParentIndex:t=>typeof t.dataset.picobelIndex<"u"?t.dataset.picobelIndex:typeof t.parentNode<"u"&&typeof t.parentNode.dataset<"u"?$.findParentIndex(t.parentNode):!1},m=$;var C=(t="default")=>{switch(t){case"itunes":return["playPause",[["title","artist"],["timer","progress","duration"]]];case"default":default:return["playPause",["mute","volume"],["title","artist"],["timer","progress","duration"]]}},L=(t={})=>{let o={context:document,theme:"default",preload:!1},{components:e,...a}=t,l=C(t.theme),i={...o,components:l,...a};return e&&Array.isArray(e)&&(i.components=e),i};var M={findAudio:t=>{let o=t.getElementsByTagName("audio");return[].slice.call(o)},prepareClasses:(t,o,e)=>[...`picobel loading picobel--index-${t} ${o}`.trim().split(" "),e],getRawData:t=>t.map((o,e)=>(o.key=e,o.mute=!1,o.tmpVolume=1,o)),getMeta:t=>{let o={};return o.url=t.currentSrc,o.fileType=m.getFileType(o.url),o.fileName=m.getFileName(o.url),o.title=t.title&&t.title!==""?t.title:`${o.fileName}.${o.fileType}`,t.dataset?o.artist=t.dataset.artist?t.dataset.artist:!1:o.artist=!1,o}},g=M;var b={};E(b,{artist:()=>B,duration:()=>z,mute:()=>I,playPause:()=>A,progress:()=>D,timer:()=>H,title:()=>S,volume:()=>q});var u=(t="div",o="")=>{let e=document.createElement(t);return e.className=o,e},y=({key:t,container:o,components:e,namespace:a})=>(e.forEach(l=>{if(typeof l=="string"&&b[l]){let i=b[l](a,t);o.appendChild(i);return}if(Array.isArray(l)&&l.length){let i=l.flat().join("-"),c=u("div",`${a}__wrapper--${i}`),r=y({key:t,container:c,components:l,namespace:a});o.appendChild(r)}}),o);var x=({namespace:t="picobel",min:o=0,max:e=100,value:a=0,step:l=!1,index:i=0,label:c="slider"})=>{let r=u("div",t),s=u("div",`${t}-slider__wrapper`),n=u("div",`${t}-slider__replacement`),p=u("div",`${t}-slider__background`);n.appendChild(p);let d=u("div",`${t}-slider__indicator`);n.appendChild(d);let v=u("div",`${t}-slider__playhead`);n.appendChild(v),s.appendChild(n);let w=`${t}-slider__range--${i}`,_=u("input",`${t}-slider__range`);_.setAttribute("id",w),_.setAttribute("type","range"),_.setAttribute("min",o),_.setAttribute("max",e),_.setAttribute("value",a),l&&_.setAttribute("step",l),s.appendChild(_);let f=u("label",`${t}-label`);return typeof c=="string"?f.innerHTML=c:f.appendChild(c),f.setAttribute("for",w),r.appendChild(f),r.appendChild(s),r};var A=t=>{let o=u("button",`${t}__play-pause`);o.setAttribute("type","button");let e=u("span",`${t}__play-pause__text`);return e.innerHTML="Play",o.appendChild(e),o},S=(t,o)=>{let e=u("span",`${t}__title`);return e.innerHTML="File "+(o+1),e},B=t=>u("span",`${t}__artist`),H=t=>{let o=u("span",`${t}__timer`);return o.innerHTML="0:00",o},z=t=>{let o=u("span",`${t}__duration`);return o.innerHTML="-:--",o},D=(t,o)=>{let e=u("span",`${t}__progress-label-inner`);return e.innerHTML="Progress",x({namespace:`${t}__progress`,min:0,max:100,value:0,index:o,label:e})},I=t=>{let o=u("button",`${t}__mute`);return o.setAttribute("type","button"),o.innerHTML="Mute",o},q=(t,o)=>{let e=u("span",`${t}__volume-label-inner`),a=u("span",`${t}__volume-label-key`);a.innerHTML="Volume ",e.appendChild(a);let l=u("span",`${t}__volume-label-value`);return l.innerHTML="10",e.appendChild(l),x({namespace:`${t}__volume`,min:0,max:1,value:1,step:.1,index:o,label:e})};var F={setLengthDisplay:t=>{let o=m.parseTime(t.duration);return t.elements.durationDisplay&&(t.elements.durationDisplay.innerHTML=o),t},setMeta:(t,o)=>(t.artist&&o.artistDisplay&&(o.artistDisplay.innerHTML=t.artist),o.titleDisplay&&(o.titleDisplay.innerHTML=t.title),o),generateMarkup:(t=[],o,e)=>t.map(l=>{let i=u("div"),c=g.prepareClasses(l.key,l.className,e);i.classList.add(...c),i.setAttribute("data-picobel-index",l.key);let r=u("div",`${e}__loader`);return i.appendChild(r),y({key:l.key,container:i,components:o,namespace:e})}),elementHooks:(t,o,e)=>t.map(a=>{let l=o.querySelector(`[data-picobel-index='${a.key}']`);return a.elements={wrapper:l,playPauseButton:l.querySelector(`.${e}__play-pause`),playPauseButtonText:l.querySelector(`.${e}__play-pause__text`),muteButton:l.querySelector(`.${e}__mute`),playTimer:l.querySelector(`.${e}__timer`),durationDisplay:l.querySelector(`.${e}__duration`),titleDisplay:l.querySelector(`.${e}__title`),artistDisplay:l.querySelector(`.${e}__artist`),progressWrapper:l.querySelector(`.${e}__progress-slider__replacement`),progressBar:l.querySelector(`.${e}__progress-slider__range`),playhead:l.querySelector(`.${e}__progress-slider__playhead`),indicator:l.querySelector(`.${e}__progress-slider__indicator`),volumeWrapper:l.querySelector(`.${e}__volume-slider__replacement`),volumeControl:l.querySelector(`.${e}__volume-slider__range`),volumeDisplay:l.querySelector(`.${e}__volume-label-value`),volumeIndicator:l.querySelector(`.${e}__volume-slider__indicator`),volumePlayhead:l.querySelector(`.${e}__volume-slider__playhead`)},a})},h=F;var P=(t={})=>{let o=L(t),e={audioNodes:[],theme:o.theme,components:o.components},a=(r,s)=>{r.map((n,p)=>{n.parentNode.replaceChild(s[p],n)})},l=r=>r.map((s,n)=>(s.addEventListener("timeupdate",i.triggerUpdateProgress,!1),s.addEventListener("canplaythrough",i.canplaythrough,!1),s.addEventListener("error",()=>i.errors(n),!1),s.elements.playPauseButton&&s.elements.playPauseButton.addEventListener("click",i.triggerPlayPauseAudio,!1),s.elements.progressBar&&s.elements.progressBar.addEventListener("input",i.sliderScrub,!1),s.elements.progressBar&&s.elements.progressBar.addEventListener("focus",p=>i.sliderFocus(p,!0),!1),s.elements.progressBar&&s.elements.progressBar.addEventListener("blur",p=>i.sliderFocus(p,!1),!1),s.elements.volumeControl&&s.elements.volumeControl.addEventListener("input",i.volume,!1),s.elements.volumeControl&&s.elements.volumeControl.addEventListener("focus",p=>i.volumeFocus(p,!0),!1),s.elements.volumeControl&&s.elements.volumeControl.addEventListener("blur",p=>i.volumeFocus(p,!1),!1),s.elements.muteButton&&s.elements.muteButton.addEventListener("click",i.muteUnmuteAudio,!1),s)),i={pauseAll:()=>{e.audioNodes.forEach(r=>{i.pause(r)})},triggerPlayPauseAudio:r=>{let s=m.findParentIndex(r.srcElement),n=e.audioNodes.find(p=>p.key==s);i.playPauseAudio(n)},playPauseAudio:r=>{r.paused||r.currentTime===0?(i.pauseAll(),i.play(r)):i.pause(r)},play:r=>{r.play();let s=r.elements.playPauseButton,n=r.elements.playPauseButtonText;s.classList.remove("paused"),n.innerHTML="Pause",s.classList.add("playing")},pause:r=>{r.pause();let s=r.elements.playPauseButton,n=r.elements.playPauseButtonText;s.classList.remove("playing"),n.innerHTML="Play",s.classList.add("paused")},stop:r=>{r.pause();let s=r.elements.playPauseButton,n=r.elements.playPauseButtonText;s.classList.remove("playing"),n.innerHTML="Play"},triggerUpdateProgress:r=>i.updateProgress(r.srcElement),updateProgress:r=>{let s=r.currentTime,n=r.duration;if(r.elements.playTimer){let d=m.parseTime(s);r.elements.playTimer.innerHTML=d}s>=n&&i.stop(r);let p=(s/n*100).toFixed(2);r.elements.progressBar&&(r.elements.progressBar.value=p,r.elements.indicator.style.width=p+"%",r.elements.playhead.style.left=p+"%")},canplaythrough:function(){h.setLengthDisplay(this),this.elements.wrapper.classList.remove("loading");let r=g.getMeta(this);h.setMeta(r,this.elements)},errors:r=>{let{elements:s}=e.audioNodes[r];s.wrapper.classList.add("error"),s.wrapper.classList.remove("loading"),s.wrapper.innerHTML='<div class="error" style="display:flex;height: 100%;align-items:  center;justify-content: center;"><span class="error__icon"></span><span class="error__message">Error loading audio file</span></div>'},sliderScrub:r=>{let s=m.findParentIndex(r.srcElement),n=e.audioNodes.find(v=>v.key==s),d=n.duration*(r.srcElement.value/100);d=d.toFixed(2),n.currentTime=d,i.updateProgress(n)},sliderFocus:(r,s)=>{let n=m.findParentIndex(r.srcElement);e.audioNodes.find(d=>d.key==n).elements.progressWrapper.classList.toggle("focus",s)},volume:r=>{let s=m.findParentIndex(r.srcElement),n=e.audioNodes.find(d=>d.key==s),p=r.srcElement.value;n.tmpVolume=n.volume,n.mute=!1,i.mute(n),i.setVolume(n,p)},volumeFocus:(r,s)=>{let n=m.findParentIndex(r.srcElement);e.audioNodes.find(d=>d.key==n).elements.volumeWrapper.classList.toggle("focus",s)},setVolume:(r,s)=>{let n=s*10,p=s*100;r.volume=s,r.elements.volumeDisplay&&(r.elements.volumeDisplay.innerHTML=n),r.elements.volumeControl&&(r.elements.volumeControl.value=s),r.elements.volumeIndicator&&(r.elements.volumeIndicator.style.width=p+"%"),r.elements.volumePlayhead&&(r.elements.volumePlayhead.style.left=p+"%")},muteUnmuteAudio:r=>{let s=m.findParentIndex(r.srcElement),n=e.audioNodes.find(p=>p.key==s);n.mute=!n.mute,i.mute(n)},mute:r=>{let s=r.elements.muteButton;r.mute?(r.tmpVolume=r.volume,i.setVolume(r,0),s.classList.add("muted"),s.classList.remove("unmuted"),s.innerHTML="Unmute"):(typeof r.tmpVolume<"u"&&r.tmpVolume>0?i.setVolume(r,r.tmpVolume):i.setVolume(r,1),s.classList.remove("muted"),s.classList.add("unmuted"),s.innerHTML="Mute")}};e.audioNodes=g.findAudio(o.context),e.audioNodes=g.getRawData(e.audioNodes);let c=h.generateMarkup(e.audioNodes,e.components,e.theme);return a(e.audioNodes,c),e.audioNodes=h.elementHooks(e.audioNodes,o.context,e.theme),e.audioNodes=l(e.audioNodes),e.audioNodes.forEach(r=>{let{readyState:s}=r;s===4&&i.canplaythrough.call(r)}),{state:e,PicobelAudio:i}};var T=`.skeleton.picobel{--black: #555;--white: #ffffff;--grey: #ddd;--focus: #015ecc;--progress-height: 32px;--progress-inner-height: 30px}.skeleton.picobel *,.skeleton.picobel *:before,.skeleton.picobel *:after{box-sizing:inherit}.skeleton.picobel *:focus{outline:2px solid var(--focus);outline-offset:1px;border-radius:2px}.skeleton.picobel{font-size:inherit;position:relative;box-sizing:border-box;z-index:1;margin:10px 0;height:64px;border:1px solid var(--black)}@keyframes background_slide{0%{background-position:0 0}to{background-position:20px 0}}.skeleton__loader{position:absolute;display:none;z-index:5;bottom:-1px;left:183px;right:0;height:var(--progress-height);border-top:1px solid var(--black);border-bottom:1px solid var(--black);background:linear-gradient(to right,var(--white) 50%,var(--black) 50%);background-size:20px 20px;background-repeat:repeat;background-position:0 0;animation:background_slide linear infinite .4s}.skeleton.loading .skeleton__loader{display:block}.skeleton__play-pause{font-size:10px;border:1px solid var(--black);appearance:none;width:64px;height:64px;background:var(--white);position:absolute;top:-1px;left:-1px;cursor:pointer}.skeleton__play-pause__text{display:none}.skeleton__play-pause:focus{z-index:3}.skeleton__play-pause:before{content:"";display:block;position:absolute;top:50%;left:50%;transform:translate(-40%,-50%);border-top:10px solid transparent;border-left:12px solid var(--black);border-bottom:10px solid transparent}.skeleton__play-pause.playing:before{height:18px;width:16px;transform:translate(-50%,-50%);border-top:0;border-left:6px solid var(--black);border-right:6px solid var(--black);border-bottom:0}.skeleton__wrapper--title-artist{padding:0 10px 0 74px;height:64px;background:var(--white);color:var(--black);line-height:1.6}.skeleton__title{display:inline-block;line-height:1;font-weight:700;font-family:monospace}.skeleton__artist{font-family:monospace;display:inline-block;margin-left:5px;line-height:1}.skeleton__artist:not(:empty):before{content:" \\2013  "}.skeleton__wrapper--timer-progress-duration{position:absolute;bottom:-1px;left:182px;right:0;height:32px;border-left:1px solid var(--black)}.skeleton__timer,.skeleton__duration{position:absolute;bottom:0;z-index:4;width:60px;text-align:left;background:transparent;color:var(--black);line-height:1;pointer-events:none;font-size:14px;height:32px;padding:10px 5px 9px 10px;font-family:monospace}.skeleton__timer{left:0}.skeleton__duration{right:0;text-align:right}.skeleton.loading .skeleton__timer,.skeleton.loading .skeleton__duration{display:none}.skeleton__progress-slider__wrapper{height:var(--progress-height);font-size:10px;line-height:1;position:absolute;bottom:0;left:0;width:100%}.skeleton__progress-slider__replacement{position:relative;background:var(--white);border-top:1px solid var(--black);border-bottom:1px solid var(--black);height:var(--progress-height);overflow:hidden}.skeleton__progress-slider__replacement.focus{outline:2px solid var(--focus);outline-offset:1px;border-radius:2px;z-index:3}.skeleton__progress-slider__indicator{height:var(--progress-inner-height);position:absolute;top:0;left:0;background:var(--grey);width:0%}.skeleton__progress-slider__playhead{width:8px;height:var(--progress-inner-height);position:absolute;top:0;left:0%;margin-left:-4px;background:var(--black)}.skeleton.loading .skeleton__progress-slider__indicator,.skeleton.loading .skeleton__progress-slider__playhead{display:none}.skeleton__progress-slider__range{width:100%;height:var(--progress-height);padding:0;margin:0;z-index:4;position:absolute;top:0;left:0;opacity:0}.skeleton__progress-slider__range::-webkit-slider-runnable-track{width:100%;height:var(--progress-height);cursor:pointer}.skeleton__progress-slider__range::-moz-range-track{width:100%;height:var(--progress-height);cursor:pointer}.skeleton__progress-slider__range::-ms-track{width:100%;height:var(--progress-height);cursor:pointer}.skeleton__wrapper--mute-volume{position:absolute;bottom:-1px;left:62px;width:120px;height:32px;z-index:2;border-top:1px solid var(--black);border-bottom:1px solid var(--black);background:var(--white);display:flex;align-items:center}.skeleton__mute{display:block;z-index:2;float:left;width:32px;height:32px;font-size:10px;color:transparent;border:0;appearance:none;background:var(--white);border:1px solid var(--black);position:relative;cursor:pointer;overflow:hidden;flex-shrink:0}.skeleton__mute:before{display:block;width:6px;height:6px;position:absolute;content:"";top:50%;right:50%;margin-right:-1px;transform:translateY(-50%);background:var(--black)}.skeleton__mute:after{display:block;width:5px;height:5px;position:absolute;content:"";top:50%;transform:translateY(-50%);right:50%;margin-right:-4px;border-top:8px solid transparent;border-right:8px solid var(--black);border-bottom:8px solid transparent}.skeleton__mute.muted:before{background:var(--grey)}.skeleton__mute.muted:after{border-right-color:var(--grey)}.skeleton__volume{--volume-padding: 6px;--volume-height: 20px;--volume-width: 76px;width:var(--volume-width) + var(--volume-padding) * 2;height:var(--volume-height) + var(--volume-padding) * 2;padding:var(--volume-padding)}.skeleton__volume-label{display:none}.skeleton__volume-slider__wrapper{width:var(--volume-width);height:var(--volume-height);position:relative}.skeleton__volume-slider__replacement{display:block;height:var(--volume-height);width:var(--volume-width);position:relative;left:0;z-index:3;background:var(--grey);flex-grow:1;float:left;transform:rotate(180deg)}.skeleton__volume-slider__replacement:after{content:"";display:block;border-right:var(--volume-width) solid var(--white);border-top:var(--volume-height) solid transparent;position:absolute;top:0;left:0;pointer-events:none}.skeleton__volume-slider__replacement.focus{outline:2px solid var(--focus);outline-offset:1px;border-radius:2px}.skeleton__volume-slider__indicator{height:100%;position:absolute;top:0;right:0;background:var(--black);width:var(--volume-width)}.skeleton__volume-slider__playhead{display:none}.skeleton__volume-slider__range{width:100%;height:var(--volume-height);padding:0;margin:0;position:absolute;z-index:4;top:0;left:0;opacity:0}.skeleton__volume-slider__range::-webkit-slider-runnable-track{width:100%;height:var(--volume-height);cursor:pointer}.skeleton__volume-slider__range::-moz-range-track{width:100%;height:var(--volume-height);cursor:pointer}.skeleton__volume-slider__range::-ms-track{width:100%;height:var(--volume-height);cursor:pointer}
`;var k=class extends HTMLElement{constructor(){super()}mountStyles(o="skeleton"){let e=`picobel-styles-${o}`;if(!document.getElementById(e)){let a=document.createElement("style");a.id=e,a.textContent=T,document.head.appendChild(a)}}connectedCallback(){let o=this.getAttribute("data-theme")||"skeleton",e={theme:o,context:this},a=this.getAttribute("data-components");a&&(e.components=JSON.parse(a)),P(e),this.mountStyles(o)}};typeof window<"u"&&"customElements"in window&&window.customElements.define("picobel-player-skeleton",k);

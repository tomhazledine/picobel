var N=Object.defineProperty;var E=(t,o)=>{for(var e in o)N(t,e,{get:o[e],enumerable:!0})};var $={parseTime:t=>{let o=Math.floor(t/3600),e=Math.floor(t%3600/60).toFixed(0).toString(),n=Math.floor(t%3600%60).toFixed(0).toString();n=n>=10?n:`0${n}`;let i=`${e}:${n}`;return o>0&&(e=e>=10?e:`0${e}`,i=`${o}:${e}:${n}`),i},getFileType:t=>t.substr((~-t.lastIndexOf(".")>>>0)+2),getFileName:t=>t.replace(/^.*[\\\/]/,"").split(".")[0],findParentIndex:t=>typeof t.dataset.picobelIndex<"u"?t.dataset.picobelIndex:typeof t.parentNode<"u"&&typeof t.parentNode.dataset<"u"?$.findParentIndex(t.parentNode):!1},m=$;var C=(t="default")=>{switch(t){case"itunes":return["playPause",[["title","artist"],["timer","progress","duration"]]];case"default":default:return["playPause",["mute","volume"],["title","artist"],["timer","progress","duration"]]}},L=(t={})=>{let o={context:document,theme:"default",preload:!1},{components:e,...n}=t,i=C(t.theme),l={...o,components:i,...n};return e&&Array.isArray(e)&&(l.components=e),l};var M={findAudio:t=>{let o=t.getElementsByTagName("audio");return[].slice.call(o)},prepareClasses:(t,o,e)=>[...`picobel loading picobel--index-${t} ${o}`.trim().split(" "),e],getRawData:t=>t.map((o,e)=>(o.key=e,o.mute=!1,o.tmpVolume=1,o)),getMeta:t=>{let o={};return o.url=t.currentSrc,o.fileType=m.getFileType(o.url),o.fileName=m.getFileName(o.url),o.title=t.title&&t.title!==""?t.title:`${o.fileName}.${o.fileType}`,t.dataset?o.artist=t.dataset.artist?t.dataset.artist:!1:o.artist=!1,o}},g=M;var b={};E(b,{artist:()=>B,duration:()=>D,mute:()=>I,playPause:()=>A,progress:()=>z,timer:()=>H,title:()=>S,volume:()=>q});var d=(t="div",o="")=>{let e=document.createElement(t);return e.className=o,e},v=({key:t,container:o,components:e,namespace:n})=>(e.forEach(i=>{if(typeof i=="string"&&b[i]){let l=b[i](n,t);o.appendChild(l);return}if(Array.isArray(i)&&i.length){let l=i.flat().join("-"),c=d("div",`${n}__wrapper--${l}`),r=v({key:t,container:c,components:i,namespace:n});o.appendChild(r)}}),o);var k=({namespace:t="picobel",min:o=0,max:e=100,value:n=0,step:i=!1,index:l=0,label:c="slider"})=>{let r=d("div",t),a=d("div",`${t}-slider__wrapper`),s=d("div",`${t}-slider__replacement`),u=d("div",`${t}-slider__background`);s.appendChild(u);let p=d("div",`${t}-slider__indicator`);s.appendChild(p);let y=d("div",`${t}-slider__playhead`);s.appendChild(y),a.appendChild(s);let w=`${t}-slider__range--${l}`,f=d("input",`${t}-slider__range`);f.setAttribute("id",w),f.setAttribute("type","range"),f.setAttribute("min",o),f.setAttribute("max",e),f.setAttribute("value",n),i&&f.setAttribute("step",i),a.appendChild(f);let h=d("label",`${t}-label`);return typeof c=="string"?h.innerHTML=c:h.appendChild(c),h.setAttribute("for",w),r.appendChild(h),r.appendChild(a),r};var A=t=>{let o=d("button",`${t}__play-pause`);o.setAttribute("type","button");let e=d("span",`${t}__play-pause__text`);return e.innerHTML="Play",o.appendChild(e),o},S=(t,o)=>{let e=d("span",`${t}__title`);return e.innerHTML="File "+(o+1),e},B=t=>d("span",`${t}__artist`),H=t=>{let o=d("span",`${t}__timer`);return o.innerHTML="0:00",o},D=t=>{let o=d("span",`${t}__duration`);return o.innerHTML="-:--",o},z=(t,o)=>{let e=d("span",`${t}__progress-label-inner`);return e.innerHTML="Progress",k({namespace:`${t}__progress`,min:0,max:100,value:0,index:o,label:e})},I=t=>{let o=d("button",`${t}__mute`);return o.setAttribute("type","button"),o.innerHTML="Mute",o},q=(t,o)=>{let e=d("span",`${t}__volume-label-inner`),n=d("span",`${t}__volume-label-key`);n.innerHTML="Volume ",e.appendChild(n);let i=d("span",`${t}__volume-label-value`);return i.innerHTML="10",e.appendChild(i),k({namespace:`${t}__volume`,min:0,max:1,value:1,step:.1,index:o,label:e})};var F={setLengthDisplay:t=>{let o=m.parseTime(t.duration);return t.elements.durationDisplay&&(t.elements.durationDisplay.innerHTML=o),t},setMeta:(t,o)=>(t.artist&&o.artistDisplay&&(o.artistDisplay.innerHTML=t.artist),o.titleDisplay&&(o.titleDisplay.innerHTML=t.title),o),generateMarkup:(t=[],o,e)=>t.map(i=>{let l=d("div"),c=g.prepareClasses(i.key,i.className,e);l.classList.add(...c),l.setAttribute("data-picobel-index",i.key);let r=d("div",`${e}__loader`);return l.appendChild(r),v({key:i.key,container:l,components:o,namespace:e})}),elementHooks:(t,o,e)=>t.map(n=>{let i=o.querySelector(`[data-picobel-index='${n.key}']`);return n.elements={wrapper:i,playPauseButton:i.querySelector(`.${e}__play-pause`),playPauseButtonText:i.querySelector(`.${e}__play-pause__text`),muteButton:i.querySelector(`.${e}__mute`),playTimer:i.querySelector(`.${e}__timer`),durationDisplay:i.querySelector(`.${e}__duration`),titleDisplay:i.querySelector(`.${e}__title`),artistDisplay:i.querySelector(`.${e}__artist`),progressWrapper:i.querySelector(`.${e}__progress-slider__replacement`),progressBar:i.querySelector(`.${e}__progress-slider__range`),playhead:i.querySelector(`.${e}__progress-slider__playhead`),indicator:i.querySelector(`.${e}__progress-slider__indicator`),volumeWrapper:i.querySelector(`.${e}__volume-slider__replacement`),volumeControl:i.querySelector(`.${e}__volume-slider__range`),volumeDisplay:i.querySelector(`.${e}__volume-label-value`),volumeIndicator:i.querySelector(`.${e}__volume-slider__indicator`),volumePlayhead:i.querySelector(`.${e}__volume-slider__playhead`)},n})},_=F;var P=(t={})=>{let o=L(t),e={audioNodes:[],theme:o.theme,components:o.components},n=(r,a)=>{r.map((s,u)=>{s.parentNode.replaceChild(a[u],s)})},i=r=>r.map((a,s)=>(a.addEventListener("timeupdate",l.triggerUpdateProgress,!1),a.addEventListener("canplaythrough",l.canplaythrough,!1),a.addEventListener("error",()=>l.errors(s),!1),a.elements.playPauseButton&&a.elements.playPauseButton.addEventListener("click",l.triggerPlayPauseAudio,!1),a.elements.progressBar&&a.elements.progressBar.addEventListener("input",l.sliderScrub,!1),a.elements.progressBar&&a.elements.progressBar.addEventListener("focus",u=>l.sliderFocus(u,!0),!1),a.elements.progressBar&&a.elements.progressBar.addEventListener("blur",u=>l.sliderFocus(u,!1),!1),a.elements.volumeControl&&a.elements.volumeControl.addEventListener("input",l.volume,!1),a.elements.volumeControl&&a.elements.volumeControl.addEventListener("focus",u=>l.volumeFocus(u,!0),!1),a.elements.volumeControl&&a.elements.volumeControl.addEventListener("blur",u=>l.volumeFocus(u,!1),!1),a.elements.muteButton&&a.elements.muteButton.addEventListener("click",l.muteUnmuteAudio,!1),a)),l={pauseAll:()=>{e.audioNodes.forEach(r=>{l.pause(r)})},triggerPlayPauseAudio:r=>{let a=m.findParentIndex(r.srcElement),s=e.audioNodes.find(u=>u.key==a);l.playPauseAudio(s)},playPauseAudio:r=>{r.paused||r.currentTime===0?(l.pauseAll(),l.play(r)):l.pause(r)},play:r=>{r.play();let a=r.elements.playPauseButton,s=r.elements.playPauseButtonText;a.classList.remove("paused"),s.innerHTML="Pause",a.classList.add("playing")},pause:r=>{r.pause();let a=r.elements.playPauseButton,s=r.elements.playPauseButtonText;a.classList.remove("playing"),s.innerHTML="Play",a.classList.add("paused")},stop:r=>{r.pause();let a=r.elements.playPauseButton,s=r.elements.playPauseButtonText;a.classList.remove("playing"),s.innerHTML="Play"},triggerUpdateProgress:r=>l.updateProgress(r.srcElement),updateProgress:r=>{let a=r.currentTime,s=r.duration;if(r.elements.playTimer){let p=m.parseTime(a);r.elements.playTimer.innerHTML=p}a>=s&&l.stop(r);let u=(a/s*100).toFixed(2);r.elements.progressBar&&(r.elements.progressBar.value=u,r.elements.indicator.style.width=u+"%",r.elements.playhead.style.left=u+"%")},canplaythrough:function(){_.setLengthDisplay(this),this.elements.wrapper.classList.remove("loading");let r=g.getMeta(this);_.setMeta(r,this.elements)},errors:r=>{let{elements:a}=e.audioNodes[r];a.wrapper.classList.add("error"),a.wrapper.classList.remove("loading"),a.wrapper.innerHTML='<div class="error" style="display:flex;height: 100%;align-items:  center;justify-content: center;"><span class="error__icon"></span><span class="error__message">Error loading audio file</span></div>'},sliderScrub:r=>{let a=m.findParentIndex(r.srcElement),s=e.audioNodes.find(y=>y.key==a),p=s.duration*(r.srcElement.value/100);p=p.toFixed(2),s.currentTime=p,l.updateProgress(s)},sliderFocus:(r,a)=>{let s=m.findParentIndex(r.srcElement);e.audioNodes.find(p=>p.key==s).elements.progressWrapper.classList.toggle("focus",a)},volume:r=>{let a=m.findParentIndex(r.srcElement),s=e.audioNodes.find(p=>p.key==a),u=r.srcElement.value;s.tmpVolume=s.volume,s.mute=!1,l.mute(s),l.setVolume(s,u)},volumeFocus:(r,a)=>{let s=m.findParentIndex(r.srcElement);e.audioNodes.find(p=>p.key==s).elements.volumeWrapper.classList.toggle("focus",a)},setVolume:(r,a)=>{let s=a*10,u=a*100;r.volume=a,r.elements.volumeDisplay&&(r.elements.volumeDisplay.innerHTML=s),r.elements.volumeControl&&(r.elements.volumeControl.value=a),r.elements.volumeIndicator&&(r.elements.volumeIndicator.style.width=u+"%"),r.elements.volumePlayhead&&(r.elements.volumePlayhead.style.left=u+"%")},muteUnmuteAudio:r=>{let a=m.findParentIndex(r.srcElement),s=e.audioNodes.find(u=>u.key==a);s.mute=!s.mute,l.mute(s)},mute:r=>{let a=r.elements.muteButton;r.mute?(r.tmpVolume=r.volume,l.setVolume(r,0),a.classList.add("muted"),a.classList.remove("unmuted"),a.innerHTML="Unmute"):(typeof r.tmpVolume<"u"&&r.tmpVolume>0?l.setVolume(r,r.tmpVolume):l.setVolume(r,1),a.classList.remove("muted"),a.classList.add("unmuted"),a.innerHTML="Mute")}};e.audioNodes=g.findAudio(o.context),e.audioNodes=g.getRawData(e.audioNodes);let c=_.generateMarkup(e.audioNodes,e.components,e.theme);return n(e.audioNodes,c),e.audioNodes=_.elementHooks(e.audioNodes,o.context,e.theme),e.audioNodes=i(e.audioNodes),e.audioNodes.forEach(r=>{let{readyState:a}=r;a===4&&l.canplaythrough.call(r)}),{state:e,PicobelAudio:l}};var T=`.default.picobel{--black: #555;--black--light: hsl(0, 0%, 43.3%);--black--opacity: rgba(0, 0, 0, .3);--white: #ffffff;--grey: #dad8d2;--greyDark: hsl(30, 10%, 65%);--primary: #ddd;--primary--opacity: rgba(221, 221, 221, .4);--highlight: #00b7c6;--background_grey_dark: #e6e6e6;--background_grey_light: #f1f1f1;--focus: #015ecc;--progress-bar-height: 2em}@keyframes background_slide{0%{background-position:0 0}to{background-position:2em 0}}.default.picobel{font-size:10px;position:relative;box-sizing:border-box;z-index:1;margin:1em 0;height:6em;border-radius:.3em;box-shadow:var(--black--opacity) 0 .1em .2em 0;background-image:linear-gradient(var(--background_grey_light),var(--background_grey_dark))}.default.picobel *,.default.picobel *:before,.default.picobel *:after{box-sizing:inherit}.default.picobel *:focus{outline:2px solid var(--focus);outline-offset:1px;border-radius:2px}.default__loader{position:absolute;z-index:2;bottom:0;left:5.6em;right:0;height:var(--progress-bar-height);opacity:0;transition:opacity .2s;pointer-events:none;background:linear-gradient(to right,var(--highlight) 50%,var(--black) 50%);background-size:var(--progress-bar-height) var(--progress-bar-height);background-repeat:repeat;background-position:0 0;animation:background_slide linear infinite .4s}.default.loading .default__loader{opacity:1}.default__play-pause{font-size:1em;border:none;appearance:none;width:4em;height:6em;color:var(--white);background:var(--black);background-image:linear-gradient(var(--black--light),var(--black));box-shadow:inset var(--black--light) -1px 0 0 0;position:absolute;top:0;left:0;cursor:pointer}.default__play-pause:focus{z-index:3}.default__play-pause__text{display:none}.default__play-pause:before{content:"";display:block;position:absolute;top:50%;left:50%;margin-top:-.8em;margin-left:-.4em;border-top:.8em solid transparent;border-left:1em solid var(--white);border-bottom:.8em solid transparent}.default__play-pause:after{content:"";display:block;position:absolute;top:50%;right:50%;height:1.4em;margin-top:-.7em;margin-right:-.7em;border-top:0;border-left:.5em solid var(--white);border-bottom:0;opacity:0}.default__play-pause.playing:before{height:1.4em;margin-top:-.7em;margin-left:-.7em;border-top:0;border-left:.5em solid var(--white);border-bottom:0}.default__play-pause.playing:after{opacity:1}.default__wrapper--title-artist{padding:1em 2em 1em 7em;height:4.4em;background:var(--primary);color:var(--black);text-shadow:var(--white) 0 .1em 0;background-image:linear-gradient(var(--background_grey_light),var(--background_grey_dark))}.default__title{display:inline-block;line-height:1;font-weight:700;font-family:monospace}.default__artist{font-family:monospace;display:inline-block;line-height:1;margin-left:.5em}.default__artist:not(:empty):before{content:" \\2013  "}.default__wrapper--timer-progress-duration{position:absolute;bottom:0;left:5.6em;right:0;height:var(--progress-bar-height)}.default__timer,.default__duration{position:absolute;top:0;z-index:3;width:6em;text-align:left;background:transparent;color:var(--white);line-height:1em;height:var(--progress-bar-height);pointer-events:none;font-size:1em;padding:.5em .5em .5em 1em;font-family:monospace}.default__timer{left:0}.default__duration{right:0;text-align:right}.default.loading .default__timer,.default.loading .default__duration{display:none}.default__progress-slider__wrapper{height:var(--progress-bar-height);position:absolute;top:0;left:0;width:100%}.default__progress-slider__replacement{height:100%;position:absolute;top:0;left:0;width:100%;background:var(--black);border-bottom-right-radius:.2em;overflow:hidden}.default__progress-slider__replacement.focus{outline:2px solid var(--focus);outline-offset:1px;border-radius:2px}.default__progress-slider__indicator{height:var(--progress-bar-height);position:absolute;top:0;left:0;background:var(--primary--opacity);width:0%}.default__progress-slider__playhead{width:.5em;height:var(--progress-bar-height);position:absolute;top:0;left:0%;margin-left:-.2em;background:var(--highlight)}.default.loading .default__progress-slider__indicator,.default.loading .default__progress-slider__playhead{display:none}.default__progress-slider__range{width:100%;height:var(--progress-bar-height);font-size:inherit;padding:0;margin:0;position:absolute;top:0;left:0;opacity:0}.default__progress-slider__range::-webkit-slider-runnable-track{width:100%;font-size:1em;height:2em;cursor:pointer}.default__progress-slider__range::-moz-range-track{width:100%;height:2em;cursor:pointer}.default__progress-slider__range::-ms-track{width:100%;height:2em;cursor:pointer}.default__wrapper--mute-volume{position:absolute;top:0;left:4em;width:1.6em;height:6em;z-index:2}.default__mute{display:block;width:1.6em;height:1.6em;font-size:1em;color:transparent;border:0;appearance:none;background:var(--black);position:absolute;top:0;right:0;cursor:pointer;overflow:hidden}.default__mute:before{display:block;width:.4em;height:.3em;position:absolute;content:"";top:50%;right:50%;margin-right:-.1em;transform:translateY(-50%);background:var(--white)}.default__mute:after{display:block;width:.4em;height:.4em;position:absolute;content:"";top:50%;margin-top:-.4em;right:50%;margin-right:-.2em;border-top:.4em solid transparent;border-right:.4em solid var(--white);border-bottom:.4em solid transparent}.default__mute.muted:before{background:var(--grey)}.default__mute.muted:after{border-right-color:var(--grey)}.default__volume-label{display:none}.default__volume-slider__wrapper{display:block;height:1.6em;position:absolute;top:1.6em;left:0;z-index:3;width:4.4em;transform:rotate(90deg) translateY(-100%);transform-origin:top left}.default__volume-slider__replacement{display:block;height:1.6em;position:absolute;top:0;left:0;background:var(--greyDark);width:4.4em}.default__volume-slider__replacement:after{content:"";display:block;width:100%;border-right:4.4em solid var(--black);border-bottom:1.6em solid transparent;position:absolute;bottom:0;left:0;pointer-events:none}.default__volume-slider__replacement.focus{outline:2px solid var(--focus);outline-offset:1px;border-radius:2px}.default__volume-slider__indicator{height:1.6em;position:absolute;top:0;right:0;background:var(--highlight);width:100%;transform:rotate(180deg)}.default__volume-slider__playhead{display:none}.default__volume-slider__range{width:100%;padding:0;margin:0;height:1.6em;position:absolute;top:0;left:0;opacity:0;transform:rotate(180deg)}.default__volume-slider__range::-webkit-slider-runnable-track{width:100%;font-size:1em;height:1.5em;cursor:pointer}.default__volume-slider__range::-moz-range-track{width:100%;height:1.5em;cursor:pointer}.default__volume-slider__range::-ms-track{width:100%;height:1.5em;cursor:pointer}
`;var x=class extends HTMLElement{constructor(){super()}mountStyles(o="default"){let e=`picobel-styles-${o}`;if(!document.getElementById(e)){let n=document.createElement("style");n.id=e,n.textContent=T,document.head.appendChild(n)}}connectedCallback(){let o=this.getAttribute("data-theme")||"default",e={theme:o,context:this},n=this.getAttribute("data-components");n&&(e.components=JSON.parse(n)),P(e),this.mountStyles(o)}};typeof window<"u"&&"customElements"in window&&window.customElements.define("picobel-player-default",x);
